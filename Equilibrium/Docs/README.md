Equilibrium
<p align="center">
<img src="https://img.shields.io/badge/platform-iOS-lightgrey.svg" alt="Platform: iOS">
<img src="https://img.shields.io/badge/iOS-15.0+-blue.svg" alt="iOS 15.0+">
<img src="https://img.shields.io/badge/Swift-5.7-orange.svg" alt="Swift 5.7">
<img src="https://img.shields.io/badge/License-MIT-green.svg" alt="License: MIT">
</p>
<p align="center">
<strong>Современное iOS приложение для медитации и релаксации</strong><br>
Дыхательные практики • Визуальная медитация • Интерактивные частицы<br>
<br>
<a href="https://apps.apple.com/rs/app/pacification">
<img src="https://tools.applemediaservices.com/api/badges/download-on-the-app-store/black/ru-ru?size=250x83&amp;releaseDate=1234567890" alt="Загружено в App Store" style="width: 200px;">
</a>
</p>

Описание
Equilibrium — это комплексное приложение для медитации, построенное полностью на SwiftUI без единой внешней зависимости. Приложение объединяет научно обоснованные дыхательные техники, визуальную медитацию и инновационную интерактивную систему частиц для глубокой релаксации.
Почему Equilibrium?

Полная кастомизация — настройте параметры дыхания под свои потребности
Научный подход — техники основаны на исследованиях когерентности сердечного ритма
Продвинутая визуализация — анимированные мандалы, природа, огонь
Умная статистика — отслеживание прогресса с системой серий
Нативная производительность — 60 FPS, оптимизация под iOS


Основные возможности
Управляемое дыхание
Полностью настраиваемые дыхательные упражнения с визуальной анимацией:

Гибкие паттерны: вдох 2-8с, задержка 0-5с, выдох 2-10с
Популярные техники: 4-7-8, Box Breathing, Coherence 5-5
Визуальная обратная связь: анимированный круг синхронизирован с дыханием
Счётчик циклов: отслеживание прогресса сессии в реальном времени
Настройка цветов: персонализация фона и элементов

Популярные режимы:
├─ Быстрая практика (2 мин): 3с вдох, 1с задержка, 5с выдох × 10 циклов
├─ Стандарт (2.5 мин): 4с вдох, 2с задержка, 6с выдох × 10 циклов
├─ Глубокая релаксация (5.5 мин): 6с вдох, 4с задержка, 8с выдох × 15 циклов
└─ Box Breathing: 4-4-4-4 для концентрации
Визуальная медитация
Три режима визуальной релаксации:
Мандалы

Анимированные GIF мандалы для фокусировки взгляда
Полноэкранный режим для полного погружения
Переключение одним касанием

Успокаивающие изображения

Галерея природных сцен высокого качества
Режим слайд-шоу с миниатюрами
Плавные переходы между изображениями

Медитация на огонь

Реалистичная анимация пламени
Иммерсивный полноэкранный режим
Идеально для практики тратаки (фиксации взгляда)

Интерактивные частицы
Продвинутая система частиц для снятия стресса через тактильное взаимодействие:
Физика в реальном времени

3000-6000 частиц с индивидуальной физикой
Плавная анимация 60 FPS
Реалистичное поведение (инерция, трение, пружины)

Интуитивное взаимодействие

Касание пальцем отталкивает частицы
Частицы плавно возвращаются на место
Адаптивная сила взаимодействия

Настраиваемые параметры

Размер частиц: 2-12pt
Плотность: регулируемое расстояние
Радиус взаимодействия: 20-200pt
Сила отталкивания: 5-50
Трение и пружины
4 готовых пресета (Gentle, Dynamic, Fluid, Bouncy)

Умная статистика
Комплексная система отслеживания прогресса:
Общая статистика

Всего сессий медитации
Общее время практики
Любимая техника
Дни активности

Детальные метрики по каждой практике

Дыхательные упражнения: сессии, время, циклы
Мандалы: просмотрено, время
Изображения: просмотрено, время
Огонь: время практики
Частицы: сессии, взаимодействия

Система серий

Текущая серия дней подряд
Рекорд серии
Мотивационные сообщения
Автоматическое отслеживание

Умные запросы оценки
Ненавязчивая система запросов рейтинга:

Показывается только после 5 сессий приложения
Требуется минимум 3 завершённые дыхательные практики
Запрос появляется в момент расслабления (после медитации)
Не чаще одного раза в 90 дней
Легко отклонить или отложить

Онбординг
Красивое знакомство с приложением:

4 экрана с объяснением возможностей
Плавные градиентные переходы
Возможность пропустить (Skip)
Показывается только при первом запуске


Скриншоты
<div align="center">
<img src="https://github.com/user-attachments/assets/e2554efb-780e-40bd-a91a-8ba8a3ebf79c" width="32%" />
<img src="https://github.com/user-attachments/assets/194b54d0-cbfe-409e-b2d8-e9f6cd28a8ca" width="32%"/>
<img src="https://github.com/user-attachments/assets/6524fac7-0a6b-4d5e-8e3e-0779fa892cab" width="32%"/>
<img src="https://github.com/user-attachments/assets/ca33da26-ac75-4cc7-b04f-9dd65715d351" width="32%" />
<img src="https://github.com/user-attachments/assets/826d135a-7e02-436c-8945-3c8bbbb30874" width="32%" />
<img src="https://github.com/user-attachments/assets/5850b569-1072-418a-9f1b-b767061ef0bc" width="32%" />
<img src="https://github.com/user-attachments/assets/bdbd586c-03c0-438f-be32-5863fcca9c4d" width="32%" />
<img src="https://github.com/user-attachments/assets/67c3e411-80ba-4156-88c3-0185eff23c3e" width="32%" />
<img src="https://github.com/user-attachments/assets/cca93b18-b662-4dff-a346-e0521b967911" width="32%" />
</div>

Технические детали
Архитектура
Приложение построено по паттерну MVVM (Model-View-ViewModel) с чистым разделением ответственности:
```
┌─────────────────────────────────────────┐
│          Presentation Layer             │
│  ┌──────────┐  ┌───────────┐  ┌────────┐│
│  │ MainView │  │ BreathView│  │ Stats  ││
│  │          │  │           │  │ View   ││
│  └──────────┘  └───────────┘  └────────┘│
└─────────────────────────────────────────┘
↓
┌─────────────────────────────────────────┐
│         Business Logic Layer            │
│  ┌──────────────┐  ┌──────────────┐     │
│  │ Statistics   │  │ Particle     │     │
│  │ Manager      │  │ Effect Model │     │
│  └──────────────┘  └──────────────┘     │
└─────────────────────────────────────────┘
↓
┌─────────────────────────────────────────┐
│            Data Layer                   │
│  ┌──────────────┐  ┌───────────────┐    │
│  │ AppStatistics│  │ BreathSettings│    │
│  │ (Codable)    │  │ (Codable)     │    │
│  └──────────────┘  └───────────────┘    │
│         UserDefaults (JSON)             │
└─────────────────────────────────────────┘
```
Стек технологий
swift- SwiftUI          // Декларативный UI
- Combine          // Реактивное программирование
- Canvas API       // Высокопроизводительный рендеринг
- AVFoundation     // GIF анимация
- CoreImage        // Обработка изображений
- UserDefaults     // Локальное хранение


### Производительность

- **60 FPS** — плавная анимация на всех экранах
- **3000-6000 частиц** — в системе Anti-Stress
- **< 30% CPU** — эффективное использование ресурсов
- **Нет утечек памяти** — value типы и правильное управление
- **Адаптивная нагрузка** — автоматическая подстройка под устройство

### Нет внешних зависимостей

Проект построен полностью на нативных iOS фреймворках:
```
✓ Нет CocoaPods
✓ Нет SPM зависимостей
✓ Нет сторонних библиотек
✓ 100% нативный код
✓ Полный контроль над кодовой базой
```

---

## Структура проекта
```
Equilibrium/
├── App/
│   └── EquilibriumApp.swift              # App entry point
│
├── Views/
│   ├── MainViews/
│   │   ├── MainView.swift                # Home screen
│   │   └── MeditationCard.swift          # Feature cards
│   │
│   ├── BreathViews/
│   │   ├── BreathView.swift              # Breathing UI
│   │   ├── BreathSettingsView.swift      # Customization
│   │   └── SettingSlider.swift           # Custom controls
│   │
│   ├── AntiStressViews/
│   │   ├── AntiStressView.swift          # Particle UI
│   │   ├── PhysicsGuideView.swift        # Help screen
│   │   └── PresetButton.swift            # Quick settings
│   │
│   ├── MandalaViews/
│   │   ├── MandalaView.swift             # Mandala viewer
│   │   └── MandalaGridItem.swift         # Grid cell
│   │
│   ├── CalmingImagesViews/
│   │   └── CalmingImagesView.swift       # Image gallery
│   │
│   ├── FireMeditation/
│   │   ├── FireMeditationView.swift      # Fire animation
│   │   └── FireSelectionItem.swift       # Fire selector
│   │
│   ├── StatisticsViews/
│   │   ├── StatisticsView.swift          # Stats display
│   │   └── StatsPeriod.swift             # Time filters
│   │
│   ├── Onboarding/
│   │   ├── LaunchScreenView.swift        # Splash screen
│   │   └── OnboardingView.swift          # 4-page intro
│   │
│   ├── AboutViews/
│   │   ├── AboutView.swift               # About screen
│   │   └── FeatureCard.swift             # Info cards
│   │
│   └── RatingPromptView.swift            # Rating dialog
│
├── ViewModels/
│   ├── BreathViewModel.swift             # Breathing logic
│   ├── CalmingImagesViewModel.swift      # Images logic
│   ├── FireMeditationViewModel.swift     # Fire logic
│   └── MandalaViewModel.swift            # Mandala logic
│
├── Models/
│   ├── AppStatistics.swift               # Statistics data
│   ├── BreathSettings.swift              # Breath config
│   ├── Particle.swift                    # Particle data
│   ├── ParticleEffectModel.swift         # Physics engine
│   ├── OnboardingPage.swift              # Onboarding data
│   ├── FeatureModel.swift                # Feature metadata
│   └── ShareSheet.swift                  # Share helper
│
├── Managers/
│   ├── StatisticsManager.swift           # Stats tracking
│   ├── RatingManager.swift               # Rating logic
│   ├── AudioPlayerManager.swift          # Music playback
│   └── StorageManager.swift              # Data persistence
│
├── Supporting Views/
│   ├── AnimatedGradientBackground.swift  # Gradient bg
│   ├── ParticleCanvas.swift              # Canvas renderer
│   ├── GIFImageView.swift                # GIF display
│   ├── ParameterSlider.swift             # Custom slider
│   ├── ColorPickerRow.swift              # Color picker
│   └── AchievementView.swift             # Milestone popup
│
├── Types/
│   └── MeditationType.swift              # Feature enum
│
├── Extensions/
│   ├── ColorExtensions.swift             # Hex colors
│   └── Extension+UIImage+Gif.swift       # GIF support
│
├── Resources/
│   ├── Assets.xcassets/                  # Images & icons
│   ├── Music/                            # Audio files
│   ├── Gif/                              # GIF animations
│   ├── Colors.swift                      # Color palette
│   ├── Icons.swift                       # SF Symbols
│   ├── L10n.swift                        # Localization
│   └── Resources.swift                   # Resource helpers
│
├── Docs/
│   ├── ARCHITECTURE.md                   # Architecture guide
│   ├── CHANGELOG.md                      # Version history
│   └── DESIGN_COMPARISON.md              # Design decisions
│
├── Localizable.xcstrings                 # String catalog
└── README.md                             # This file
```

---

## Установка и запуск

### Требования
```
iOS 15.0+
Xcode 14.0+
Swift 5.7+
Клонирование
bashgit clone https://github.com/yourusername/equilibrium.git
cd equilibrium
Запуск
bashopen Equilibrium.xcodeproj
Нажмите ⌘ + R для запуска
Сборка
bash# Clean
⇧ + ⌘ + K

# Build
⌘ + B

# Run
⌘ + R
```

---

## Использование

### Базовый флоу медитации
```
1. Запуск приложения
↓
2. LaunchScreen (анимация 2.5с)
↓
3. Onboarding (первый запуск)
↓
4. Выбор типа медитации
↓
5. Выполнение практики
↓
6. Автоматическое сохранение статистики
↓
7. Запрос оценки (по условиям)
Настройка дыхательного упражнения
swift// В BreathView нажать на иконку настроек

Параметры:
├─ Вдох: 2-8 секунд (шаг 0.5с)
├─ Задержка: 0-5 секунд (шаг 0.5с)
├─ Выдох: 2-10 секунд (шаг 0.5с)
├─ Диаметр круга: 150-300pt
├─ Циклов: 5-20
├─ Цвет фона: ColorPicker
└─ Цвет круга: ColorPicker

Автоматический расчёт времени сессии
Кнопка сброса на дефолтные значения
Live preview изменений
Работа с частицами
swift// Открыть Anti-Stress

Взаимодействие:
├─ Tap → частицы отталкиваются
├─ Drag → непрерывное взаимодействие
└─ Частицы плавно возвращаются

Настройка (иконка шестерёнки):
├─ Visual: размер, плотность
├─ Force: радиус, сила, плавность
├─ Physics: скорость, трение, пружина
└─ Presets: 4 готовых настройки

Пресеты:
├─ Gentle: лёгкий ветерок, расслабляющий
├─ Dynamic: энергичный, отзывчивый
├─ Fluid: текучий, как вода
└─ Bouncy: отскакивающий, игривый

Конфигурация
Параметры физики частиц
В файле ParticleEffectModel.swift:
swift// Плотность (меньше = больше частиц)
var particleSpacing: CGFloat = 8

// Размер частиц
var particleSize: CGFloat = 3.37

// Радиус взаимодействия
var interactionRadius: CGFloat = 80

// Сила отталкивания
var forceStrength: CGFloat = 25

// Плавность силы
var forceSmoothness: CGFloat = 0.2

// Множитель скорости
var particleVelocityFactor: CGFloat = 1.2

// Трение
var friction: CGFloat = 0.8

// Сила возврата
var springStrength: CGFloat = 0.05
Настройки статистики
В файле RatingManager.swift:
swift// Минимум сессий до первого запроса
private let minSessionsBeforePrompt = 5

// Дни между запросами
private let minDaysBetweenPrompts = 90

// Минимум дыхательных сессий
private let minBreathSessions = 3
Цветовая схема
Все цвета используют hex формат через расширение:
swift// Главный экран
LinearGradient(
    colors: [
        Color(hex: "0f0c29"),  // Тёмно-фиолетовый
        Color(hex: "302b63"),  // Фиолетовый
        Color(hex: "24243e")   // Тёмно-синий
    ],
    startPoint: .topLeading,
    endPoint: .bottomTrailing
)

// Дыхание (дефолт)
backgroundColor: Color(hex: "4A90E2")  // Синий
circleColor: .white

// Частицы
Градиенты на основе позиции и скорости

Производительность
Оптимизации
Система частиц:
swift// Адаптивное количество
let spacing = ProcessInfo.processInfo.processorCount >= 6 ? 8 : 12

// Условный рендеринг
guard hasUserInteracted else { return }

// Эффективное обновление
Timer.publish(every: 1/60, on: .main, in: .common)
Управление памятью:
swift// Value типы (struct) для автоочистки
struct Particle { }

// Weak self в замыканиях
Timer.scheduledTimer { [weak self] in }

// Нет retain cycles
Рендеринг:
swift// Canvas API для аппаратного ускорения
Canvas { context, size in
    for particle in particles {
        context.fill(path, with: .color(particle.color))
    }
}
```

### Целевые показатели
```
CPU: < 30%
FPS: 60 (стабильно)
Память: Стабильная, без утечек
Батарея: Минимальное влияние
Частиц: 3000-6000
Время кадра: < 16ms
Профилирование
bash# Открыть Instruments
Product → Profile (⌘ + I)

Инструменты:
├─ Time Profiler: анализ CPU
├─ Allocations: использование памяти
├─ Leaks: утечки памяти
└─ Energy Log: расход батареи

Вклад в проект
Как внести вклад

Форкните репозиторий
Создайте ветку фичи (git checkout -b feature/amazing-feature)
Внесите изменения
Протестируйте на реальном устройстве
Закоммитьте (git commit -m 'Add amazing feature')
Запушьте (git push origin feature/amazing-feature)
Откройте Pull Request

Стиль кода
swift// Следуйте Swift API Design Guidelines
// Комментируйте сложные алгоритмы
// Максимум 50 строк на функцию
// Максимум 3 уровня вложенности

// Хорошо
func updateParticles() {
    guard hasInteraction else { return }
    applyForces()
    updatePositions()
}

// Плохо
func updateParticles() {
    if hasInteraction {
        for particle in particles {
            if particle.isActive {
                if shouldUpdate(particle) {
                    // Глубокая вложенность
                }
            }
        }
    }
}
```

### Чеклист перед PR
```
[ ] Сборка без предупреждений
[ ] Работает на iOS 15+
[ ] Протестировано на iPhone и iPad
[ ] Протестировано на реальном устройстве
[ ] Нет утечек памяти (Instruments)
[ ] 60 FPS поддерживается
[ ] Статистика работает корректно
[ ] Добавлены комментарии к сложному коду
```

---

## Roadmap

### Версия 2.1

- [ ] Еженедельные/месячные графики статистики
- [ ] Установка целей медитации
- [ ] Система достижений
- [ ] Экспорт данных (CSV/PDF)

### Версия 2.2

- [ ] Анализ времени суток
- [ ] Тренды использования функций
- [ ] Корреляция с настроением
- [ ] Социальный шаринг

### Версия 3.0

- [ ] Apple Watch приложение
- [ ] Виджеты для главного экрана
- [ ] Siri shortcuts
- [ ] HealthKit интеграция
- [ ] CloudKit синхронизация
- [ ] Тёмная/светлая тема

---

## Лицензия

MIT License

Контакты
Ссылка на проект: [Equilibrium на GitHub](https://github.com/Vlad-tdk/Equilibrium)
App Store: https://apps.apple.com/rs/app/pacification/
Email: appequilibrium@icloud.com

Благодарности

Команде SwiftUI за мощный декларативный фреймворк
iOS сообществу за вдохновение и best practices
Бета-тестерам за ценную обратную связь
Всем контрибьюторам проекта


<p align="center">
<strong>Сделано с любовью на SwiftUI</strong><br>
Без внешних зависимостей • Чистый iOS код<br>
<br>
Поставьте звезду если проект вам понравился!
